{"version":3,"sources":["../../src/layer/city.ts"],"names":["CityLayer","config","adcode","depth","data","adcodeArray","Array","isArray","features","filter","fe","code","properties","adcode_cit","indexOf","type","ProvinceLayer"],"mappings":";;;;;;;;;;;;;;;;;;;;;AACA;;AAGA;;;;;;IAKqBA,S;;;;;;;;;;;;uCACgC;AACjD,UAAMC,MAAM,8GAAZ;AACA,aAAO,oBAAM,EAAN,EAAUA,MAAV,EAAkB;AACvBC,QAAAA,MAAM,EAAE,CAAC,QAAD,CADe;AAEvBC,QAAAA,KAAK,EAAE;AAFgB,OAAlB,CAAP;AAID;;;+BACoBC,I,EAAWF,M,EAAoB;AAClD,UAAMG,WAAW,GAAGC,KAAK,CAACC,OAAN,CAAcL,MAAd,IAAwBA,MAAxB,GAAiC,CAACA,MAAD,CAArD;AACA,UAAMM,QAAQ,GAAGJ,IAAI,CAACI,QAAL,CAAcC,MAAd,CAAqB,UAACC,EAAD,EAAa;AACjD,YAAMC,IAAI,GAAGD,EAAE,CAACE,UAAH,CAAcC,UAA3B;AACA,eACER,WAAW,CAACS,OAAZ,CAAoBH,IAApB,MAA8B,CAAC,CAA/B,IACAN,WAAW,CAACS,OAAZ,CAAoB,KAAKH,IAAzB,MAAmC,CAAC,CAFtC;AAID,OANgB,CAAjB;AAOA,aAAO;AAAEI,QAAAA,IAAI,EAAE,mBAAR;AAA6BP,QAAAA,QAAQ,EAARA;AAA7B,OAAP;AACD;;;oCAEyBJ,I,EAAWF,M,EAAoB;AACvD,UAAMG,WAAW,GAAGC,KAAK,CAACC,OAAN,CAAcL,MAAd,IAAwBA,MAAxB,GAAiC,CAACA,MAAD,CAArD;AACA,UAAMM,QAAQ,GAAGJ,IAAI,CAACK,MAAL,CAAY,UAACC,EAAD,EAAa;AACxC,YAAMC,IAAI,GAAGD,EAAE,CAACG,UAAhB;AACA,eACER,WAAW,CAACS,OAAZ,CAAoBH,IAApB,MAA8B,CAAC,CAA/B,IACAN,WAAW,CAACS,OAAZ,CAAoB,KAAKH,IAAzB,MAAmC,CAAC,CAFtC;AAID,OANgB,CAAjB;AAOA,aAAOH,QAAP;AACD;;;EA9BoCQ,iB","sourcesContent":["// tslint:disable-next-line: no-submodule-imports\nimport merge from 'lodash/merge';\n\nimport { adcodeType, IDistrictLayerOption } from './interface';\nimport ProvinceLayer from './province';\n\nexport interface IProvinceLayerOption extends IDistrictLayerOption {\n  adcode: adcodeType;\n}\nexport default class CityLayer extends ProvinceLayer {\n  protected getDefaultOption(): IProvinceLayerOption {\n    const config = super.getDefaultOption();\n    return merge({}, config, {\n      adcode: ['110000'],\n      depth: 3,\n    });\n  }\n  protected filterData(data: any, adcode: adcodeType) {\n    const adcodeArray = Array.isArray(adcode) ? adcode : [adcode];\n    const features = data.features.filter((fe: any) => {\n      const code = fe.properties.adcode_cit;\n      return (\n        adcodeArray.indexOf(code) !== -1 ||\n        adcodeArray.indexOf('' + code) !== -1\n      );\n    });\n    return { type: 'FeatureCollection', features };\n  }\n\n  protected filterLabelData(data: any, adcode: adcodeType) {\n    const adcodeArray = Array.isArray(adcode) ? adcode : [adcode];\n    const features = data.filter((fe: any) => {\n      const code = fe.adcode_cit;\n      return (\n        adcodeArray.indexOf(code) !== -1 ||\n        adcodeArray.indexOf('' + code) !== -1\n      );\n    });\n    return features;\n  }\n}\n"],"file":"city.js"}